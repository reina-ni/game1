<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" href="img/player/player.png">
    <title>シロクマくんのぼうけん</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<style>
    .leaves-container {
    position: absolute;
    height: 100vh;
    width: 100%;
    overflow: auto;
    }
    
    .leaf {
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center center;
    position: absolute;
    animation: animate-leaf 8s linear;
    }
    
    /* player */
    .leaf-1 {
    background-image: url('img/other/snow.png');
    background-color:rgba(0,0,0,0);
    }
    /* player3 */
    .leaf-2 {
    background-image: url('img/other/heart.png');
    background-color:rgba(0,0,0,0);
    }
    /* player4 */
    .leaf-3 {
    background-image: url('img/other/leaf.png');
    background-color:rgba(0,0,0,0);
    }
    /* player5 */
    .leaf-4 {
    background-image: url('img/other/darkblue.png');
    background-color:rgba(0,0,0,0);
    }
    
    @keyframes animate-leaf {
    0% {
    opacity: 0;
    top: 0;
    transform: rotate(0);
    }
    
    10% {
    opacity: 1;
    }
    
    90% {
    opacity: 1;
    }
    
    100% {
    opacity: 0;
    top: 100vh;
    transform: rotate(1080deg);
    }
    }

    * { background:#a5ccdf}
    p{
        margin-top: 5%;
        margin-left: none;
    }
    button{
        text-align: center;
        margin-top: 2%;
    }
    .flex{
        display: flex;
        justify-content: center;
        margin-top: 10%;
    }
    .float {
        animation: float_2979 3s linear infinite;
        transform-origin: 50% 50%;
    }
    @keyframes float_2979 {
        0% { transform: translateY(0) }
        33.33333% { transform: translateY(-6px) }
        66.66667% { transform: translateY(0) }
        100% { transform: translateY(0) }
    }
    html,body{
      height: 100%;/*描画エリアの為*/
  }
  .flex1{
    background-color: none;
	position: absolute;
    display: flex;
    justify-content: right;
    margin: 2%;
	}
  .bgmc{
		color: rgb(83, 77, 77,0.5);
		font-size: 10px;
	}

</style>

<body>
    <div class="leaves-container"></div>
        <div id="awan" ontouchstart="">
        <!-- ポップアップ -->
      <div class="flex1">
        <label class="open" for="pop-up"><img src="img/command/gamerule.png" width="20px" height="20px"></label>
          <input type="checkbox" id="pop-up">
            <div class="overlay">
              <div class="window">
                <br><br><br><br>
                <p class="bgmc">BGM<br>
                <label class="close" for="pop-up">×</label>
                orchestrajingle.mp3 甘茶の音楽工房</p>
              </div>
            </div>
      </div>
            <!-- <EMBED src="music/tousen.mp3" autostart="true" hidden="true"> -->
                <audio autoplay id="audio">
                    <source src="music/orchestrajingle.mp3">
                  </audio>
        <div class="float">
            <div class="flex">
                <p id="clearcountshortest"></p>
                <img src="img/player/playerclear01.png" height="100" id="chara">
                <p>ボスをたおしたよ！
                    <br>いっしょにぼうけんしてくれてありがとう！
                </p>
                <img src="img/player/playerclear03.png" height="100">
            </div>
        </div>
            <!-- <p>アンケートの回答にご協力よろしくお願い致します！→→→
            <a href="https://forms.gle/Jzx8rZAAcxZrfXWh9">アンケート</a></p> -->
            <button type="button" id="home"><img src="img/command/home.png"></button>
        </div>
<script>
    var character = window.localStorage.getItem("character");
    var character_name = window.localStorage.getItem("character_name");

    document.getElementById("chara").src="img/player/character_"+character_name+".png";

   

    
    // var clearcount = window.localStorage.getItem("clearcount");
    // console.log("移動回数結果："+clearcount);
    // var clearcountshortest = window.localStorage.getItem("clearcountshortest");
    // console.log("最短移動回数："+clearcountshortest);

    // var filename = window.localStorage.getItem("filename");
    // console.log("次ステージ："+filename);

    // var shortest_check = window.localStorage.getItem("shortest_check");

    // console.log(shortest_check);

    document.getElementById("home").onclick = function () {
        window.location.href = "index1.html";
    };
</script>

<script>
    window.addEventListener('DOMContentLoaded', ()=> {
     
     const container = document.querySelector('.leaves-container');
     
     const createLeaf = (leafClass, minSizeVal, maxSizeVal) => {
       const leafEl = document.createElement('span');
       leafEl.className = `leaf ${leafClass}`;
       const minSize = minSizeVal;
       const maxSize = maxSizeVal;
       const size = Math.random() * (maxSize + 1 - minSize) + minSize;
       leafEl.style.width = `${size}px`;
       leafEl.style.height = `${size}px`;
       leafEl.style.left = Math.random() * 100 + '%';
       container.appendChild(leafEl);
     
       setTimeout(() => {
         leafEl.remove();
       }, 8000);
     }
    if(character_name=="player"){
        setInterval(createLeaf.bind(this, 'leaf-1', 30, 50), 500);
    }else if(character_name=="player3"){
        setInterval(createLeaf.bind(this, 'leaf-2', 30, 50), 500);
    }else if(character_name=="player4"){
        setInterval(createLeaf.bind(this, 'leaf-3', 30, 50), 500);
    }else if(character_name=="player5"){
        setInterval(createLeaf.bind(this, 'leaf-4', 30, 50), 500);
    }
    });
    </script>
    

</body>
</html>

<!-- tousen.mp3:ポケットサウンド-https://pocket-se.info/ -->
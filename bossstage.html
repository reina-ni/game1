<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>ぼうけんゲーム</title>
	<link rel="stylesheet" href="style.css">
	<link href="https://fonts.googleapis.com/css2?family=Yusei+Magic&display=swap" rel="stylesheet">
	<!-- ビューポートの設定 -->
	<meta name="viewport" content="width=device-width,initial-scale=1">
</head>

<style>
	*{ background:#FFC29B;}
	#stage{
		background:#FF7061;
	}
	
	#site-box{
		width : 600px ; 
		margin: auto;
	}
	#container{
		display: flex;
		justify-content: center;
		align-items: center;
		flex-wrap: wrap;
	}
	p{
		margin-top:none;
	}
	div{
		margin-top: 1%;
		margin-left: 1%;
		margin-right: 1%;
	}
	
	.flex{
        display: flex;
        justify-content: center;
        margin-top: 2%;
	}
	#order{
		border-color: #FF7061;
	}
	#order_answer{
		border-color: #FF7061;
	}
	/* #life-frame {
    margin: 0 auto;
    width: 80%;
    background-color: rgba(10, 0, 50, 0.6);
    display: flex;
    padding: 3px 3px;
}
#life-bar {
    height: 3px;
    background-color: rgb(0, 255, 255);
    transition: 300ms
}
#life-mark {
    width: 3px;
    height: 3px;
    border-radius: 3px;
    background-color: rgb(255, 255, 255);
    filter: saturate(500%);
    box-shadow: 0 0 5px 3px rgb(200, 255, 255),
                0 0 7px 7px rgb(100, 255, 255);
}
#btns-wrap {
    width: 100px;
    margin: 0 auto;
    display: flex;
    justify-content: space-around;
}
#increase-btn,#decrease-btn {
    margin-top: 10px;
    width: 30px;
    height: 30px;
    border-radius: 5px;
    color: white;
    background-color: dodgerblue;
    text-align: center;
    line-height: 30px;
    box-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    user-select: none;
}
#increase-btn:active,#decrease-btn:active {
    transform: translate(2px,2px);
    box-shadow: none;
	} */
	.flash-title {
		position: fixed;
		top: 0;
		left: 0;
		display: table;
		width: 100%;
		height: 100%;
		-webkit-animation: fade-in-out 5s ease 1s forwards;
		animation: fade-in-out 5s ease 1s forwards;
		visibility: hidden;
		z-index: 1;
	}
	/*文字変更用：削除しない*/
	/* .flash-title p {
		display: table-cell;
		vertical-align: middle;
		text-align: center;
		font-size: 90px;
		color: #fff;
	} */
	@-webkit-keyframes fade-in-out {
		0% {visibility: hidden; opacity: 0;}
		50% {visibility: visible; opacity: 1;}
		100% {visibility: hidden; opacity: 0;}
	}

	@keyframes fade-in-out {
		0% {visibility: hidden; opacity: 0;}
		50% {visibility: visible; opacity: 1;}
		100% {visibility: hidden; opacity: 0;}
	}
</style>

<!-- bossalert -->
<body>
		<div class="flash-title">
			<img src="img/boss_alert.png" width="100%">
		  </div>
    

	</head>

	<body>

		<div id="site-box">
		<p id="stage">アザラシくんといっしょにドラゴンをたおそう！</p>
		<form action="#" name="form1">
			</form>
			<div class="float">
				<div class="flex">
				
					<div id="container">
						
							<img src="img/empty.png" height="100" id="order_answer">
							<img src="img/playerclear02.png" height="100" >
							<!-- <div id="life-frame">
								<div id="life-bar"></div>
								<div id="life-mark"></div>
							</div> -->
							<!-- <p>HP:10</p> -->
							<!-- <p>あざらしくんHP<meter value="0.3">30%</meter></p> -->
							<p>　　　　　　</p>
							
					  </div>

		

		<!-- 各ボタン作成 -->
		<div><canvas id="canvas"></canvas></div>

		<div id="container">
			<img src="img/empty.png" height="100" id="order">
			<img src="img/playerclear01.png" height="100" >
			<p>ドラゴンHP<meter max="100" low="60" high="80" value="100" id="meter"></meter></p>
			
	  </div>
	  </div>
	  </div>

		<div>
			<button type="button" id="right"><img src="img/command/right.png" id="右"></button>
			<button type="button" id="left"><img src="img/command/left.png" id="左"></button>
			<button type="button" id="up"><img src="img/command/up.png" id="上"></button>
			<button type="button" id="down"><img src="img/command/down.png" id="下"></button>
			<button type="button" id="act"><img src="img/command/bossaction.png"></button>
			<button type="button" id="again"><img src="img/command/restart.png"></button>
			<button type="button" id="attack"><img src="img/command/icc.png"></button>
            <!-- <button type="button" id="attack2"><img src="img/command/nicc.png"></button> -->
            <!-- <button type="button" id="attack3"><img src="img/command/icelv3.png"></button> -->
		</div>
		<script>
			// document.getElementById("attack3").hidden = true;
			// シロクマくんのうごくかずカウント
			var count = 0;

			var line = [];
			var image = { "右":"<img src='img/command/right.png' width=3%>", 
						"左":"<img src='img/command/left.png' width=3%>", 
						"上":"<img src='img/command/up.png' width=3%>",
						"下":"<img src='img/command/down.png' width=3%>",
						"攻撃":"<img src='img/command/icc.png' width=3%>"
						// ,
						// "攻撃2":"<img src='img/command/nicc.png' width=3%>"
						// ,
						// "攻撃3":"<img src='img/command/icelv3.png' width=3%>"
					}

			// 各ボタンがクリックさせた時の処理
			document.getElementById("right").onclick = function () {
				count++;
				document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
				line.push("右"); //配列に格納
				console.log(line);
				document.getElementById("move").innerHTML = "シロクマくんのうごき：" + image[line[0]];
				rewrite();
			};
			document.getElementById("left").onclick = function () {
				count++;
				document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
				line.push("左");
				console.log(line);
				document.getElementById("move").innerHTML = "シロクマくんのうごき：" + image[line[0]];
				rewrite();
			};
			document.getElementById("up").onclick = function () {
				count++;
				document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
				line.push("上");
				console.log(line);
				document.getElementById("move").innerHTML = "シロクマくんのうごき：" + image[line[0]];
				rewrite();
			};
			document.getElementById("down").onclick = function () {
				count++;
				document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
				line.push("下");
				console.log(line);
				document.getElementById("move").innerHTML = "シロクマくんのうごき：" + image[line[0]];
				rewrite();
			};
			document.getElementById("attack").onclick = function () {
				//最短シロクマくんのうごくかずが変わっちゃうからcountプラスしない
				document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
				line.push("攻撃");
				console.log(line);
				document.getElementById("move").innerHTML = "シロクマくんのうごき：" + image[line[0]];
				rewrite();
			};
			// document.getElementById("attack2").onclick = function () {
			// 	//最短シロクマくんのうごくかずが変わっちゃうからcountプラスしない
			// 	document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
			// 	line.push("攻撃2");
			// 	console.log(line);
			// 	document.getElementById("move").innerHTML = "シロクマくんのうごき：" + image[line[0]];
			// 	rewrite();
			// };
            // document.getElementById("attack3").onclick = function () {
			// 	//最短シロクマくんのうごくかずが変わっちゃうからcountプラスしない
			// 	document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
			// 	line.push("攻撃3");
			// 	console.log(line);
			// 	document.getElementById("move").innerHTML = "シロクマくんのうごき：" + image[line[0]];
			// 	rewrite();
			// };

			//配列削除（初期化）やり直すボタンクリック時の処理
			document.getElementById("again").onclick = function () {
				//移動ボタン表示
				document.getElementById("right").hidden = false;
				document.getElementById("left").hidden = false;
				document.getElementById("up").hidden = false;
				document.getElementById("down").hidden = false;
				document.getElementById("act").hidden = false;
				document.getElementById("attack").hidden = false;
                // document.getElementById("attack2").hidden = false;
                // document.getElementById("attack3").hidden = true;
				count = 0; //カウント初期化
				document.getElementById("count").innerHTML = "シロクマくんのうごくかず：" + count;
				line.length = 0; //配列を空に
				console.log(line);
				document.getElementById("move").innerHTML = "シロクマくんのうごき："
				player.move = 0;
				get_enemy();//敵の再配置
				// プレイヤーをスタート位置へ
				player.x = 48;
				player.y = 48;
				order_answer.setAttribute('src', 'img/empty.png');
			};
			

			//移動方向表示p1書き換え
			function rewrite() {
				if (line.length > 1) {
					for (let j = 1; j < line.length; j++) {
						// document.getElementById("move").innerHTML += "→" + line[j];
						var url=image[line[j]];
						document.getElementById("move").innerHTML += url;
						// document.write("<img src='" + image["line[j]"] +"'>");
					}
				}
			}



// const lifeBar = document.getElementById('life-bar')         // ライフバー
// const lifeMark = document.getElementById('life-mark')       // ライフの光部分
// // const increaseBtn = document.getElementById('increase-btn') // + ボタン
// // const decreaseBtn = document.getElementById('decrease-btn') // - ボタン
// let life = 100                                              // ライフ初期値
// lifeBar.style.width = "100%"                                // ライフ初期幅
// // *** ライフ変更処理 ***
// function alterLife( value ){
//     // lifeの値を算出する
//     life += value 
//     if ( life <= 0 ){
//         // 算出の結果 0 以下になった場合
//         life = 0
//         // 0.3秒後に光部分を非表示にする
//         setTimeout(function(){
//             lifeMark.style.visibility = 'hidden'
//         }, 300)
//     } else {
//         // 算出の結果 100 を超過した場合
//         if ( life > 100 ) {
//             life = 100
//         }
//         // 光部分を表示する
//         lifeMark.style.visibility = 'visible'
//     }
//     // スタイル(幅)を更新する
//     lifeBar.style.width = life + "%"
// }


		</script>

		<!-- 表示 -->
<p1 id=move>シロクマくんのうごき：</p1><br>
<p2 id=count>シロクマくんのうごくかず：０</p2>

		<script type="text/javascript" src="js/findShortestPath.js"></script>
		<script type="text/javascript" src="js/scriptbossstage.js"></script>

	</body>

</html>